<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>공원 자산 관리 시스템</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'park-green': {
                '50': '#f0fdf4',
                '100': '#dcfce7',
                '200': '#bbf7d0',
                '300': '#86efac',
                '400': '#4ade80',
                '500': '#22c55e',
                '600': '#16a34a',
                '700': '#15803d',
                '800': '#166534',
                '900': '#14532d',
              },
            }
          }
        }
      }
    </script>
    <!-- 
      [중요] 네이버 지도 API 스크립트입니다.
      'YOUR_CLIENT_ID' 부분에 실제 발급받은 네이버 클라우드 플랫폼의 Client ID를 입력해주세요.
      자세한 내용은 https://guide.ncloud-docs.com/docs/naveropenapiv3-maps-javascript-v3-overview 를 참고하세요.
    -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=YOUR_CLIENT_ID"></script>
    <!-- Babel Standalone for in-browser JSX/TSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "html2canvas": "https://aistudiocdn.com/html2canvas@^1.4.1",
    "jspdf": "https://aistudiocdn.com/jspdf@^3.0.3"
  }
}
</script>
</head>
  <body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel" data-type="module">
      import React, { useState, useRef, useCallback, useEffect, useMemo } from 'react';
      import ReactDOM from 'react-dom/client';
      import jsPDF from 'jspdf';
      import html2canvas from 'html2canvas';

      // --- Inlined Types ---
      /*
        interface ParkAsset {
          id: string;
          name: string;
          type: string;
          registrationDate: string; 
          photo: string; 
          mapView: string; 
          latitude: number | null;
          longitude: number | null;
          condition: '좋음' | '보통' | '나쁨';
          description: string;
        }
        type Stage = 'register' | 'inquiry' | 'report';
      */

      // --- Inlined Component: CameraModal ---
      const CameraModal = ({ onCapture, onClose }) => {
        const videoRef = useRef(null);
        const canvasRef = useRef(null);
        const [stream, setStream] = useState(null);
        const [error, setError] = useState(null);

        useEffect(() => {
          let mediaStream;
          navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
            .then(s => {
              setStream(s);
              mediaStream = s;
              if (videoRef.current) {
                videoRef.current.srcObject = s;
              }
            })
            .catch(err => {
              console.error("Camera access error:", err);
              setError("카메라에 접근할 수 없습니다. 권한을 확인해주세요.");
            });

          return () => {
            if (mediaStream) {
              mediaStream.getTracks().forEach(track => track.stop());
            }
          };
        }, []);

        const handleCapture = useCallback(() => {
          if (videoRef.current && canvasRef.current) {
            const video = videoRef.current;
            const canvas = canvasRef.current;
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            if (context) {
              context.drawImage(video, 0, 0, canvas.width, canvas.height);
              const dataUrl = canvas.toDataURL('image/jpeg');
              onCapture(dataUrl);
            }
          }
        }, [onCapture]);

        return (
          <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-lg shadow-xl w-full max-w-2xl">
              <div className="p-4 border-b">
                <h3 className="text-lg font-medium">사진 촬영</h3>
              </div>
              <div className="p-4">
                {error ? (
                  <div className="text-red-500 bg-red-100 p-4 rounded-md">{error}</div>
                ) : (
                  <div className="relative">
                    <video ref={videoRef} autoPlay playsInline className="w-full h-auto rounded-md bg-gray-900"></video>
                    <canvas ref={canvasRef} className="hidden"></canvas>
                  </div>
                )}
              </div>
              <div className="p-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3">
                <button onClick={onClose} className="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">취소</button>
                <button onClick={handleCapture} disabled={!stream} className="px-4 py-2 bg-park-green-600 text-white rounded-md hover:bg-park-green-700 disabled:bg-park-green-300 transition">촬영</button>
              </div>
            </div>
          </div>
        );
      };

      // --- Inlined Component: AssetRegistration ---
      const AssetRegistration = ({ onAddAsset, onComplete }) => {
        const [isCameraOpen, setIsCameraOpen] = useState(false);
        const [formData, setFormData] = useState({
          name: '',
          type: '벤치',
          photo: '',
          latitude: null,
          longitude: null,
          condition: '좋음',
          description: ''
        });
        const [mapViewUrl, setMapViewUrl] = useState('');
        const [errors, setErrors] = useState({});
        const [isSubmitting, setIsSubmitting] = useState(false);

        const getNaverStaticMapUrl = (lat, lon) => {
          const zoom = 18;
          const width = 400;
          const height = 300;
          const marker = `type:t|size:mid|pos:${lon} ${lat}`;
          return `https://naveropenapi.apigw.ntruss.com/map-static/v2/raster?w=${width}&h=${height}&center=${lon},${lat}&level=${zoom}&markers=${encodeURIComponent(marker)}`;
        }

        const handleChange = (e) => {
          const { name, value } = e.target;
          setFormData(prev => ({ ...prev, [name]: value }));
        };

        const handleTakePhoto = () => {
          setIsSubmitting(true);
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const { latitude, longitude } = position.coords;
              setFormData(prev => ({
                ...prev,
                latitude,
                longitude
              }));
              setMapViewUrl(getNaverStaticMapUrl(latitude, longitude));
              setIsCameraOpen(true);
              setIsSubmitting(false);
            },
            (error) => {
              console.error("Geolocation error:", error);
              alert("위치 정보를 가져올 수 없습니다. GPS 권한을 확인해주세요.");
              setIsSubmitting(false);
            },
            { enableHighAccuracy: true }
          );
        };

        const handleCapture = (dataUrl) => {
          setFormData(prev => ({ ...prev, photo: dataUrl }));
          setIsCameraOpen(false);
        };

        const validate = () => {
          const newErrors = {};
          if (!formData.name.trim()) newErrors.name = "자산명을 입력해주세요.";
          if (!formData.description.trim()) newErrors.description = "설명을 입력해주세요.";
          if (!formData.photo) newErrors.photo = "현장사진을 촬영해주세요.";
          if (formData.latitude === null || formData.longitude === null) {
            newErrors.latitude = "위치 정보가 없습니다.";
          }
          setErrors(newErrors);
          return Object.keys(newErrors).length === 0;
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          if (validate()) {
            const newAsset = {
              ...formData,
              registrationDate: new Date().toISOString(),
              mapView: mapViewUrl,
            };
            onAddAsset(newAsset);
            alert('자산이 성공적으로 등록되었습니다.');
            onComplete();
          }
        };

        return (
          <div className="bg-white p-6 sm:p-8 rounded-lg shadow-lg max-w-4xl mx-auto">
            {isCameraOpen && <CameraModal onCapture={handleCapture} onClose={() => setIsCameraOpen(false)} />}
            <form onSubmit={handleSubmit} noValidate>
              <h2 className="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">신규 자산 등록</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="space-y-6">
                  <div>
                    <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-1">자산명</label>
                    <input type="text" id="name" name="name" value={formData.name} onChange={handleChange} required className={`w-full px-3 py-2 border ${errors.name ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500`} />
                    {errors.name && <p className="text-red-500 text-xs mt-1">{errors.name}</p>}
                  </div>
                  <div>
                    <label htmlFor="type" className="block text-sm font-medium text-gray-700 mb-1">자산 종류</label>
                    <select id="type" name="type" value={formData.type} onChange={handleChange} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500">
                      <option>벤치</option>
                      <option>가로등</option>
                      <option>분수대</option>
                      <option>운동기구</option>
                      <option>안내판</option>
                    </select>
                  </div>
                  <div>
                    <label htmlFor="condition" className="block text-sm font-medium text-gray-700 mb-1">상태</label>
                    <select id="condition" name="condition" value={formData.condition} onChange={handleChange} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500">
                      <option>좋음</option>
                      <option>보통</option>
                      <option>나쁨</option>
                    </select>
                  </div>
                  <div>
                    <label htmlFor="description" className="block text-sm font-medium text-gray-700 mb-1">설명</label>
                    <textarea id="description" name="description" rows={4} value={formData.description} onChange={handleChange} required className={`w-full px-3 py-2 border ${errors.description ? 'border-red-500' : 'border-gray-300'} rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500`}></textarea>
                    {errors.description && <p className="text-red-500 text-xs mt-1">{errors.description}</p>}
                  </div>
                </div>
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">현장사진</label>
                    <div className="w-full h-48 border-2 border-dashed border-gray-300 rounded-md flex items-center justify-center bg-gray-50">
                      {formData.photo ? <img src={formData.photo} alt="현장사진" className="max-h-full max-w-full object-contain" /> : <span className="text-gray-500">사진 없음</span>}
                    </div>
                    <button type="button" onClick={handleTakePhoto} disabled={isSubmitting} className="mt-2 w-full flex justify-center items-center px-4 py-2 bg-park-green-600 text-white rounded-md hover:bg-park-green-700 disabled:bg-gray-400 transition">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M2 6a2 2 0 012-2h1.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 6H12a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm8 3a3 3 0 100 6 3 3 0 000-6z" /></svg>
                      {isSubmitting ? '위치 정보 확인 중...' : '사진 촬영'}
                    </button>
                    {errors.photo && <p className="text-red-500 text-xs mt-1">{errors.photo}</p>}
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">위치도 (1:1000 평면도)</label>
                    <div className="w-full h-48 border border-gray-300 rounded-md flex items-center justify-center bg-gray-50">
                       {mapViewUrl ? <img src={mapViewUrl} alt="위치도" className="max-h-full max-w-full object-cover" /> : <span className="text-gray-500">위치 정보 필요</span>}
                    </div>
                  </div>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label htmlFor="latitude" className="block text-sm font-medium text-gray-700 mb-1">위도</label>
                      <input type="text" id="latitude" readOnly value={formData.latitude?.toFixed(6) ?? ''} className="w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md" />
                    </div>
                    <div>
                      <label htmlFor="longitude" className="block text-sm font-medium text-gray-700 mb-1">경도</label>
                      <input type="text" id="longitude" readOnly value={formData.longitude?.toFixed(6) ?? ''} className="w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md" />
                    </div>
                     {errors.latitude && <p className="text-red-500 text-xs mt-1 col-span-2">{errors.latitude}</p>}
                  </div>
                </div>
              </div>
              <div className="mt-8 pt-6 border-t">
                <button type="submit" className="w-full md:w-auto float-right px-6 py-3 bg-park-green-700 text-white font-bold rounded-md hover:bg-park-green-800 transition shadow-lg">자산 등록 완료</button>
              </div>
            </form>
          </div>
        );
      };

      // --- Inlined Component: AssetInquiry ---
      const AssetInquiry = ({ assets }) => {
        const today = new Date().toISOString().split('T')[0];
        const [startDate, setStartDate] = useState('');
        const [endDate, setEndDate] = useState('');
        
        const filteredAssets = useMemo(() => {
          if (!startDate && !endDate) return assets;
          return assets.filter(asset => {
            const assetDate = new Date(asset.registrationDate);
            const start = startDate ? new Date(startDate) : null;
            const end = endDate ? new Date(endDate) : null;
            
            if (start) start.setHours(0, 0, 0, 0);
            if (end) end.setHours(23, 59, 59, 999);

            if (start && assetDate < start) return false;
            if (end && assetDate > end) return false;
            return true;
          });
        }, [assets, startDate, endDate]);

        const clearFilters = () => {
          setStartDate('');
          setEndDate('');
        };

        return (
          <div className="bg-white p-6 sm:p-8 rounded-lg shadow-lg">
            <h2 className="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">자산 조회</h2>
            
            <div className="bg-gray-50 p-4 rounded-md mb-6 flex flex-wrap items-end gap-4">
              <div className="flex-grow">
                <label htmlFor="startDate" className="block text-sm font-medium text-gray-700 mb-1">조회 시작일</label>
                <input type="date" id="startDate" value={startDate} onChange={e => setStartDate(e.target.value)} max={today} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500" />
              </div>
              <div className="flex-grow">
                <label htmlFor="endDate" className="block text-sm font-medium text-gray-700 mb-1">조회 종료일</label>
                <input type="date" id="endDate" value={endDate} onChange={e => setEndDate(e.target.value)} max={today} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500" />
              </div>
               <button onClick={clearFilters} className="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition h-10">
                  필터 초기화
              </button>
            </div>

            <div className="overflow-x-auto">
              {filteredAssets.length > 0 ? (
              <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-100">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">자산명</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">등록일시</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">현장사진</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">위치도</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">위도/경도</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">상태</th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {filteredAssets.map(asset => (
                    <tr key={asset.id}>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="text-sm font-medium text-gray-900">{asset.name}</div>
                        <div className="text-sm text-gray-500">{asset.type}</div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{new Date(asset.registrationDate).toLocaleString('ko-KR')}</td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <img src={asset.photo} alt={asset.name} className="h-16 w-16 object-cover rounded-md shadow-sm" />
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <img src={asset.mapView} alt="위치도" className="h-16 w-16 object-cover rounded-md shadow-sm" />
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <div>{asset.latitude?.toFixed(5)}</div>
                        <div>{asset.longitude?.toFixed(5)}</div>
                      </td>
                       <td className="px-6 py-4 whitespace-nowrap">
                          <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                              asset.condition === '좋음' ? 'bg-green-100 text-green-800' :
                              asset.condition === '보통' ? 'bg-yellow-100 text-yellow-800' :
                              'bg-red-100 text-red-800'
                          }`}>
                              {asset.condition}
                          </span>
                       </td>
                    </tr>
                  ))}
                </tbody>
              </table>
              ) : (
                <div className="text-center py-10 text-gray-500">
                  <p>해당 기간에 등록된 자산이 없습니다.</p>
                </div>
              )}
            </div>
          </div>
        );
      };

      // --- Inlined Component: ReportGeneration ---
      const ReportGeneration = ({ assets }) => {
        const today = new Date().toISOString().split('T')[0];
        const [startDate, setStartDate] = useState('');
        const [endDate, setEndDate] = useState('');
        const reportContentRef = useRef(null);

        const filteredAssets = useMemo(() => {
          if (!startDate && !endDate) return [];
          return assets.filter(asset => {
            const assetDate = new Date(asset.registrationDate);
            const start = startDate ? new Date(startDate) : null;
            const end = endDate ? new Date(endDate) : null;
            
            if (start) start.setHours(0, 0, 0, 0);
            if (end) end.setHours(23, 59, 59, 999);

            if (start && assetDate < start) return false;
            if (end && assetDate > end) return false;
            return true;
          });
        }, [assets, startDate, endDate]);

        const handleDownloadPDF = async () => {
          const input = reportContentRef.current;
          if (!input || filteredAssets.length === 0) {
            alert("보고서로 출력할 데이터가 없습니다. 기간을 선택해주세요.");
            return;
          }

          try {
            const canvas = await html2canvas(input, { scale: 2 });
            const imgData = canvas.toDataURL('image/png');
            
            const pdf = new jsPDF({
              orientation: 'p',
              unit: 'mm',
              format: 'a4'
            });
            
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            const imgWidth = canvas.width;
            const imgHeight = canvas.height;
            const ratio = imgWidth / imgHeight;
            const height = pdfWidth / ratio;

            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, height);
            
            pdf.save(`park_asset_report_${startDate}_to_${endDate}.pdf`);
          } catch (error) {
            console.error("PDF 생성 중 오류 발생:", error);
            alert("PDF를 생성하는 데 실패했습니다.");
          }
        };

        const handleDownloadCSV = () => {
          if (filteredAssets.length === 0) {
            alert("CSV로 내보낼 데이터가 없습니다. 기간을 선택해주세요.");
            return;
          }

          const headers = ["ID", "자산명", "종류", "등록일시", "위도", "경도", "상태", "설명"];
          const rows = filteredAssets.map(asset => [
            asset.id,
            asset.name,
            asset.type,
            new Date(asset.registrationDate).toLocaleString('ko-KR'),
            asset.latitude,
            asset.longitude,
            asset.condition,
            `"${asset.description.replace(/"/g, '""')}"`
          ]);

          let csvContent = "data:text/csv;charset=utf-8,\uFEFF" // BOM for Excel
            + headers.join(",") + "\n"
            + rows.map(e => e.join(",")).join("\n");
          
          const encodedUri = encodeURI(csvContent);
          const link = document.createElement("a");
          link.setAttribute("href", encodedUri);
          link.setAttribute("download", `park_asset_report_${startDate}_to_${endDate}.csv`);
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        };
        
        return (
          <div className="bg-white p-6 sm:p-8 rounded-lg shadow-lg">
            <h2 className="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">보고서 생성 및 출력</h2>
            
            <div className="bg-gray-50 p-4 rounded-md mb-6 flex flex-wrap items-end gap-4">
              <div className="flex-grow">
                <label htmlFor="startDateReport" className="block text-sm font-medium text-gray-700 mb-1">시작일</label>
                <input type="date" id="startDateReport" value={startDate} onChange={e => setStartDate(e.target.value)} max={today} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500" />
              </div>
              <div className="flex-grow">
                <label htmlFor="endDateReport" className="block text-sm font-medium text-gray-700 mb-1">종료일</label>
                <input type="date" id="endDateReport" value={endDate} onChange={e => setEndDate(e.target.value)} max={today} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-park-green-500 focus:border-park-green-500" />
              </div>
              <div className="flex items-center space-x-2 pt-6">
                <button onClick={handleDownloadPDF} className="flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2H4a1 1 0 110-2V4zm5 4a1 1 0 100 2h2a1 1 0 100-2H9z" clipRule="evenodd" /></svg>
                  PDF 다운로드
                </button>
                <button onClick={handleDownloadCSV} className="flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clipRule="evenodd" /></svg>
                  CSV 다운로드
                </button>
              </div>
            </div>
            
            <div id="report-content" ref={reportContentRef} className="p-4 border border-gray-200 rounded-md bg-white">
              <h3 className="text-xl font-bold text-center mb-2">공원 자산 보고서</h3>
              <p className="text-center text-gray-600 mb-6">
                {startDate && endDate ? `조회 기간: ${startDate} ~ ${endDate}` : '기간을 선택하여 자산 내역을 확인하세요.'}
              </p>

              {filteredAssets.length > 0 ? (
                <div className="space-y-4">
                  {filteredAssets.map((asset, index) => (
                    <div key={asset.id} className="p-4 border rounded-lg break-inside-avoid">
                      <h4 className="text-lg font-semibold text-park-green-800 mb-3">{index + 1}. {asset.name} ({asset.type})</h4>
                      <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
                        <div className="sm:col-span-2">
                          <p><strong>등록일시:</strong> {new Date(asset.registrationDate).toLocaleString('ko-KR')}</p>
                          <p><strong>상태:</strong> {asset.condition}</p>
                          <p><strong>위치:</strong> 위도 {asset.latitude?.toFixed(5)}, 경도 {asset.longitude?.toFixed(5)}</p>
                          <p className="mt-2"><strong>설명:</strong> {asset.description}</p>
                        </div>
                        <div className="space-y-2">
                          <img src={asset.photo} alt={asset.name} className="w-full rounded-md shadow-sm" />
                          <img src={asset.mapView} alt="위치도" className="w-full rounded-md shadow-sm" />
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center py-10 text-gray-500">
                  <p>선택된 기간에 해당하는 자산이 없습니다.</p>
                  <p className="text-sm">보고서를 생성하려면 조회 기간을 선택해주세요.</p>
                </div>
              )}
            </div>
          </div>
        );
      };
      
      // --- Inlined Main App Component ---
      const RegisterIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clipRule="evenodd" /></svg>
      );
      const InquiryIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clipRule="evenodd" /></svg>
      );
      const ReportIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M2 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm3.5 4a1.5 1.5 0 013 0V14a1.5 1.5 0 01-3 0V10zm6.5-1.5a1.5 1.5 0 00-3 0V14a1.5 1.5 0 003 0V8.5z" /></svg>
      );

      const App = () => {
        const [stage, setStage] = useState('register');
        const [assets, setAssets] = useState(() => {
          try {
            const savedAssets = localStorage.getItem('parkAssets');
            return savedAssets ? JSON.parse(savedAssets) : [];
          } catch (error) {
            console.error("Could not parse assets from localStorage", error);
            return [];
          }
        });

        const addAsset = useCallback((newAsset) => {
          setAssets(prevAssets => {
            const updatedAssets = [...prevAssets, { ...newAsset, id: new Date().toISOString() }];
            localStorage.setItem('parkAssets', JSON.stringify(updatedAssets));
            return updatedAssets;
          });
        }, []);

        const STAGES = [
          { id: 'register', name: '자산 등록', icon: <RegisterIcon /> },
          { id: 'inquiry', name: '자산 조회', icon: <InquiryIcon /> },
          { id: 'report', name: '보고서 출력', icon: <ReportIcon /> },
        ];

        return (
          <div className="min-h-screen bg-gray-100 text-gray-800">
            <header className="bg-white shadow-md sticky top-0 z-10">
              <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex justify-between items-center py-4">
                  <h1 className="text-2xl font-bold text-park-green-700">공원 자산 관리 시스템</h1>
                </div>
                <nav className="flex space-x-1 border-b">
                  {STAGES.map(s => (
                    <button
                      key={s.id}
                      onClick={() => setStage(s.id)}
                      className={`flex items-center px-4 py-3 text-sm font-medium transition-colors duration-200 ease-in-out focus:outline-none ${
                        stage === s.id
                          ? 'border-b-2 border-park-green-600 text-park-green-600'
                          : 'text-gray-500 hover:text-park-green-600'
                      }`}
                    >
                      {s.icon}
                      {s.name}
                    </button>
                  ))}
                </nav>
              </div>
            </header>
            <main className="container mx-auto p-4 sm:p-6 lg:p-8">
              {stage === 'register' && <AssetRegistration onAddAsset={addAsset} onComplete={() => setStage('inquiry')} />}
              {stage === 'inquiry' && <AssetInquiry assets={assets} />}
              {stage === 'report' && <ReportGeneration assets={assets} />}
            </main>
          </div>
        );
      };

      // --- Inlined Entry Point ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>